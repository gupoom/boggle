<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="t5-orientation" content="portrait">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e293b">

    <title>HAN-GL MOA</title>
    

  <script type="module" crossorigin src="./assets/index-CN6ogXCp.js"></script>
  <link rel="stylesheet" crossorigin href="./assets/index-DpVb61DT.css">
</head>
<body>

    <div id="introScreen" class="intro-screen">
        <div class="intro-bg-container">
            <div class="board-3d">
                <img src="./assets/intro_board-CjgkyG4-.png" alt="Game Board" class="board-img">
                <svg class="drag-trail" width="100%" height="100%">
                    <path d="M120,110 L180,110 L120,180 L180,180" fill="none" stroke="#fff" stroke-width="8" stroke-linecap="round" stroke-dasharray="300" stroke-dashoffset="300"/>
                </svg>
            </div>
            <div class="bg-overlay"></div>
        </div>

        <div class="intro-content">
            <img src="./assets/logo_intro-SOa6nkRD.png" alt="HAN-GL MOA" class="intro-logo">
            <button class="btn-start" onclick="startFromIntro()">GAME START</button>
        </div>
    </div>

    <div id="countdownOverlay" class="countdown-overlay">
        <div id="countdownCard" class="countdown-card">
            <span id="countdownText" class="countdown-text">3</span>
        </div>
        <div class="countdown-msg">Ready!</div>
    </div>

    <div id="toast" class="toast hidden">
        <span id="toastWord" class="toast-word"></span>
        <span id="toastDesc" class="toast-desc"></span>
    </div>

    <div class="header-area">
        <img src="./assets/logo_game-DU2zKSDD.png" alt="MOA" class="header-logo">
        
        <div class="header-controls">
            <button id="btnRanking" class="btn-icon-setting" onclick="openRankingModal()">
                <span style="font-size:22px;">🏆</span>
            </button>

            <button class="btn-new-game" onclick="startWithCountdown()">
                <span id="uiNewGame">↻ 새 게임</span>
            </button>
            
            <button id="btnSettings" class="btn-icon-setting" onclick="openSettingsModal()">
                <span style="font-size:22px;">⚙️</span>
            </button>
        </div>
    </div>

    <div class="control-bar">
        <button id="btnGridSize" class="setting-btn" onclick="openOptionModal('grid')">
            <svg class="setting-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>
            <span id="txtGridSize">4x4</span>
        </button>

        <button id="btnLevel" class="setting-btn" onclick="openOptionModal('level')">
            <svg class="setting-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
            <span id="txtLevel">랜덤</span>
        </button>

        <div class="mode-switch">
            <button class="mode-btn active" id="btnPractice" onclick="setMode('practice')">연습</button>
            <button class="mode-btn" id="btnChallenge" onclick="setMode('challenge')">챌린지</button>
        </div>
    </div>

    <div class="stats-bar">
        <div class="stat-group">
            <span class="stat-label">SCORE</span>
            <div>
                <span class="score-val" id="score">0</span>
                <span class="score-target" id="targetScoreDisplay">/ 100</span>
            </div>
        </div>

        <div class="stat-group" id="statWordGroup" style="display:none;">
            <span class="stat-label" id="uiStatWordLabel">단어 (찾은것/전체)</span>
            <div>
                <span class="score-val" id="foundCount">0</span>
                <span class="score-target" id="totalCount">/ 0</span>
            </div>
        </div>

        <div class="stat-group" style="align-items:flex-end;">
            <span class="stat-label">TIME</span>
            <div class="timer-val" id="timer">00:00</div>
        </div>
    </div>

    <div class="found-area">
        <div class="word-list" id="wordList"></div>
    </div>

    <div class="bottom-container">
        <div class="mission-container">
            <div id="hintTooltip" class="hint-tooltip">눌러서 힌트 보기!</div>
            <div id="hintBar" class="mission-bar hidden">
                <span class="mission-icon">🎁</span>
                <span id="hintText">힌트</span> <span id="hintScore" class="mission-score">+50</span>
            </div>
            <button id="btnHint" class="hint-btn hidden" onclick="useHint()">
                💡 힌트 보기
            </button>
        </div>

        <div class="current-word" id="currentWord">시작</div>
        <div class="grid" id="grid">
            <div id="gridInner" class="grid-inner"></div>
        </div>
    </div>

    <div class="overlay" id="optionModal">
        <div class="modal">
            <div class="modal-title" id="optTitle">설정</div>
            <div class="option-list" id="optList"></div>
            <button class="btn-full btn-gray" id="uiCloseOption" onclick="closeOptionModal()">닫기</button>
        </div>
    </div>

    <div class="overlay" id="settingsModal">
        <div class="modal">
            <div class="modal-title" id="uiSettingsTitle">설정</div>
            
            <div style="margin: 20px 0;">
                <div class="setting-item">
                    <div class="setting-label" id="uiVibration">📳 진동 효과</div>
                    <label class="switch">
                        <input type="checkbox" id="vibrateToggle" checked onchange="toggleVibration(this)">
                        <span class="slider round"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-label" id="uiSound">🔊 효과음</div>
                    <label class="switch">
                        <input type="checkbox" id="soundToggle" checked onchange="toggleSound(this)">
                        <span class="slider round"></span>
                    </label>
                </div>
            </div>

            <hr class="divider">

            <button id="btnRemoveAdsInSetting" class="btn-premium" onclick="AdManager.purchaseRemoveAds()">
                🚫 광고 제거 (프리미엄)
            </button>

            <button class="btn-full btn-gray" id="uiCloseSettings" style="margin-top:15px;" onclick="closeSettingsModal()">닫기</button>
            
            <div class="source-info-area">
                <div class="source-title" id="uiSourceTitle">자료 출처</div>
                <p class="source-desc" id="uiSourceDesc"></p>
                <div class="source-links">
                  <a id="uiLinkUrimalsaem" href="https://opendict.korean.go.kr" target="_blank">우리말샘</a>
                  <span class="divider-vertical">|</span>
                   <a id="uiLinkBasicDict" href="https://krdict.korean.go.kr" target="_blank">한국어기초사전</a>
              </div>
            </div>
        </div>
    </div>

    <div class="overlay" id="resultModal">
        <div class="modal">
            <span class="modal-icon" id="resIcon">🎉</span>
            <div class="modal-title" id="resTitle">성공!</div>
            <div class="modal-desc" id="resDesc">목표 점수를 달성했습니다!</div>
            <button class="btn-full bg-green" id="resBtn" onclick="startWithCountdown()">새 게임 시작</button>
        </div>
    </div>

    <div class="sheet-wrapper" id="sheetOverlay" onclick="closeSheet()">
        <div class="sheet-bg"></div>
        <div class="sheet" onclick="event.stopPropagation()">
            <h2 id="sheetWord">단어</h2>
            <div id="sheetEng" class="sheet-eng-word"></div>
            <div id="sheetEngDesc" class="sheet-eng-desc"></div>
            <div id="sheetDesc" class="sheet-desc"></div>
            <button id="btnNaver" class="btn-full bg-green" style="margin-top:10px;">
                📖 네이버 사전 검색
            </button>
            <button class="btn-full btn-gray" id="uiCloseSheet" onclick="closeSheet()">닫기</button>
        </div>
    </div>

    <div class="overlay" id="rankingModal">
        <div class="modal ranking-modal-content">
            <button class="btn-close-ranking" onclick="closeRankingModal()">✕</button>

            <div class="modal-title" id="uiRankingTitle" style="margin-top:20px;">🏆 HALL OF FAME</div>

            <div class="rank-type-switch">
                <button class="rank-type-btn" id="btnRankTime" onclick="switchRankMode('time')">
                    ⏱️ <span id="uiRankTime">스피드런</span>
                </button>
                
                <button class="rank-type-btn active" id="btnRankScore" onclick="switchRankMode('score')">
                    🏆 <span id="uiRankScore">타임어택</span>
                </button>
            </div>
            
            <div class="ranking-list" id="rankingList">
                <div class="rank-loading">Loading...</div>
            </div>
        </div>
    </div>

    <canvas id="confetti-canvas"></canvas>

    
</body>
</html>
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">
    
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1e293b">

    <title>HAN-GL MOA</title>
    
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="js/levels.js"></script>
    <script src="js/dictionary.js"></script>
</head>
<body>

    <div id="introScreen" class="intro-screen">
        <img src="images/logo_intro.png" alt="HAN-GL MOA" class="intro-logo">
        <button class="btn-start" onclick="startWithCountdown()">GAME START</button>
    </div>

    <div id="countdownOverlay" class="countdown-overlay">
        <div id="countdownCard" class="countdown-card">
            <span id="countdownText" class="countdown-text">3</span>
        </div>
        <div class="countdown-msg">새 게임을 시작합니다</div>
    </div>

    <div id="toast" class="toast hidden">
        <span id="toastWord" class="toast-word"></span>
        <span id="toastDesc" class="toast-desc"></span>
    </div>

    <div class="header-area">
        <img src="images/logo_game.png" alt="MOA" class="header-logo">
        <button class="btn-new-game" onclick="startWithCountdown()">
            <span>↻ 새 게임</span>
        </button>
    </div>

    <div class="control-bar">
        <button id="btnGridSize" class="setting-btn" onclick="openOptionModal('grid')">
            <svg class="setting-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>
            <span id="txtGridSize">5x5</span>
        </button>

        <button id="btnLevel" class="setting-btn" onclick="openOptionModal('level')">
            <svg class="setting-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="20" x2="12" y2="10"></line><line x1="18" y1="20" x2="18" y2="4"></line><line x1="6" y1="20" x2="6" y2="16"></line></svg>
            <span id="txtLevel">랜덤</span>
        </button>

        <div class="mode-switch">
            <button class="mode-btn active" id="btnPractice" onclick="setMode('practice')">연습</button>
            <button class="mode-btn" id="btnChallenge" onclick="setMode('challenge')">챌린지</button>
        </div>
    </div>

    <div class="stats-bar">
        <div class="stat-group">
            <span class="stat-label">SCORE</span>
            <div>
                <span class="score-val" id="score">0</span>
                <span class="score-target" id="targetScoreDisplay">/ 100</span>
            </div>
        </div>
        <div class="stat-group" style="align-items:flex-end;">
            <span class="stat-label">TIME</span>
            <div class="timer-val" id="timer">00:00</div>
        </div>
    </div>

    <div class="found-area">
        <div class="word-list" id="wordList"></div>
    </div>

    <div class="bottom-container">
        <div class="mission-container">
            <div id="hintTooltip" class="hint-tooltip">눌러서 힌트 보기!</div>
            <div id="hintBar" class="mission-bar hidden">
                <span class="mission-icon">🎁</span>
                <span id="hintText">힌트</span>
                <span id="hintScore" class="mission-score">+50</span>
            </div>
        </div>

        <div class="current-word" id="currentWord">시작</div>
        <div class="grid" id="grid"></div>
    </div>

    <div class="overlay" id="optionModal">
        <div class="modal">
            <div class="modal-title" id="optTitle">설정</div>
            <div class="option-list" id="optList"></div>
            <button class="btn-full btn-gray" onclick="closeOptionModal()">닫기</button>
        </div>
    </div>

    <div class="overlay" id="resultModal">
        <div class="modal">
            <span class="modal-icon" id="resIcon">🎉</span>
            <div class="modal-title" id="resTitle">성공!</div>
            <div class="modal-desc" id="resDesc">목표 점수를 달성했습니다!</div>
            <button class="btn-full bg-green" id="resBtn" onclick="startWithCountdown()">새 게임 시작</button>
        </div>
    </div>

    <div class="sheet-wrapper" id="sheetOverlay" onclick="closeSheet()">
        <div class="sheet-bg"></div>
        <div class="sheet" onclick="event.stopPropagation()">
            <h2 id="sheetWord">단어</h2>
            <div id="sheetEng" class="sheet-eng-word"></div>
            <div id="sheetEngDesc" class="sheet-eng-desc"></div>
            <div id="sheetDesc" class="sheet-kor-desc"></div>
            <a href="#" id="btnNaver" class="btn-full bg-green" target="_blank" style="display:block; text-decoration:none; line-height:24px;">
                📖 네이버 사전 검색
            </a>
            <button class="btn-full btn-gray" onclick="closeSheet()">닫기</button>
        </div>
    </div>

    <script type="module" src="js/game.js"></script>
</body>
</html>
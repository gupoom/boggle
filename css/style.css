@charset "utf-8";

/* [기존 스타일 원복 시작] */
:root {
    --bg-color: #1e293b;       
    --card-bg: #334155;        
    --tile-bg: #f8fafc;        
    --tile-text: #1e293b;      
    --accent-color: #3b82f6;   
    --highlight-color: #f59e0b;
    --text-color: #ffffff;
    --success-color: #22c55e;
    --danger-color: #ef4444;
    --primary-gradient: linear-gradient(135deg, #6366f1, #8b5cf6);
    --glass-bg: rgba(255, 255, 255, 0.08);
}

* { box-sizing: border-box; font-family: 'Pretendard', 'Apple SD Gothic Neo', sans-serif; -webkit-tap-highlight-color: transparent; }

body { 
    background-color: var(--bg-color); 
    color: var(--text-color);
    display: flex; flex-direction: column;
    height: 100dvh;
    margin: 0;
    overflow: hidden; user-select: none;
    -webkit-user-select: none; /* [추가] 사파리용 선택 방지 */
    touch-action: none;
    padding-top: calc(env(safe-area-inset-top) - 14px);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: calc(env(safe-area-inset-left) + 14px);
    padding-right: calc(env(safe-area-inset-right) + 14px);

    /* 부드러운 움직임을 위한 애니메이션 */
    transition: padding-bottom 0.3s ease;
}

/* 2. [핵심] 광고가 떴을 때 (.ads-active) 스타일 */
body.ads-active {
    /* 기존 하단 여백 + 배너 높이(약 60px)만큼 더 밀어올림 */
    padding-bottom: calc(env(safe-area-inset-bottom) + 60px);
}

/* === 인트로 === */
.intro-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100dvh;
    background-color: var(--bg-color);
    background-image: radial-gradient(circle at 50% 30%, #334155 0%, #1e293b 70%);
    z-index: 2000; 
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    transition: opacity 0.4s ease-out, visibility 0.4s;
}
.intro-screen.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
.intro-logo { width: 85%; max-width: 400px; margin-bottom: 60px; filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.3)); animation: float 3s ease-in-out infinite; margin-bottom: 200px; }
@keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
.btn-start {
    background: var(--primary-gradient); color: white; font-size: 22px; font-weight: 800;
    padding: 18px 60px; border: none; border-radius: 50px;
    box-shadow: 0 10px 30px rgba(99, 102, 241, 0.5); cursor: pointer; transition: transform 0.1s;
}
.btn-start:active { transform: scale(0.96); }

/* === 카드 플립 카운트다운 === */
.countdown-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(15, 23, 42, 0.9);
    backdrop-filter: blur(8px);
    z-index: 2500; 
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    gap: 40px;
    opacity: 0; visibility: hidden; transition: opacity 0.2s;
    perspective: 1000px; 
}
.countdown-overlay.active { opacity: 1; visibility: visible; }

.countdown-card {
    width: 160px; height: 160px;
    background-color: #f8fafc; 
    border-radius: 24px;
    display: flex; justify-content: center; align-items: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.5), inset 0 -5px 0 #cbd5e1;
    transform-style: preserve-3d;
    opacity: 0; 
}

.countdown-text { font-size: 100px; font-weight: 900; color: #1e293b; line-height: 1; }
.countdown-msg {
    font-size: 22px; font-weight: 700; color: white;
    text-shadow: 0 2px 10px rgba(0,0,0,0.5);
    opacity: 0; transform: translateY(20px);
    transition: opacity 0.3s;
}
.countdown-overlay.active .countdown-msg { animation: fadeInUp 0.5s ease-out 0.2s forwards; }
@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

.card-flip-action { animation: flipCardAnim 0.85s cubic-bezier(0.4, 0.0, 0.2, 1) forwards; }
@keyframes flipCardAnim {
    0% { opacity: 0; transform: rotateX(-90deg) translateZ(-50px); }
    30% { opacity: 1; transform: rotateX(0deg) translateZ(0); }
    70% { opacity: 1; transform: rotateX(0deg) translateZ(0); }
    100% { opacity: 0; transform: rotateX(90deg) translateZ(50px); }
}

/* === 토스트 메시지 === */
.toast {
    position: fixed;
    top: 300px; 
    left: 50%; transform: translateX(-50%);
    background-color: rgba(15, 23, 42, 0.9);
    color: white;
    padding: 10px 20px;
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    z-index: 4000;
    display: flex; flex-direction: column; align-items: center; text-align: center;
    width: auto; max-width: 90%;
    opacity: 0; visibility: hidden;
    transition: all 0.3s ease-out;
    pointer-events: none;
}
.toast.show { opacity: 1; visibility: visible; top: 280px; }
.toast-word { display: none; }
.toast-desc { font-size: 16px; color: #f1f5f9; font-weight: 500; word-break: keep-all; line-height: 1.3; }

/* === 힌트 툴팁 (말풍선) - 위쪽 === */
.hint-tooltip {
    position: absolute;
    top: -45px;
    left: 50%; transform: translateX(-50%);
    background-color: #ef4444; color: white;
    font-size: 12px; font-weight: 700;
    padding: 6px 12px; border-radius: 14px;
    white-space: nowrap;
    box-shadow: 0 4px 10px rgba(239, 68, 68, 0.4);
    z-index: 50;
    animation: bounceTooltip 1.5s infinite;
    pointer-events: none;
    opacity: 0; transition: opacity 0.3s;
}
.hint-tooltip::after {
    content: ''; position: absolute;
    bottom: -5px; left: 50%; transform: translateX(-50%);
    border-width: 6px 6px 0 6px;
    border-style: solid;
    border-color: #ef4444 transparent transparent transparent;
}
.hint-tooltip.show { opacity: 1; }
@keyframes bounceTooltip {
    0%, 100% { transform: translateX(-50%) translateY(0); }
    50% { transform: translateX(-50%) translateY(-3px); }
}

/* === 힌트 타일 하이라이트 === */
.tile.hint-highlight {
    background-color: #fef08a !important; color: #854d0e !important;
    border: 2px solid transparent !important; 
    box-shadow: inset 0 0 0 3px #eab308, 0 0 15px rgba(234, 179, 8, 0.6) !important;
    transform: scale(1.05); z-index: 5;
    animation: pulseHint 1s infinite alternate;
}
@keyframes pulseHint {
    from { transform: scale(1.05); box-shadow: 0 0 15px rgba(234, 179, 8, 0.6); }
    to { transform: scale(1.1); box-shadow: 0 0 25px rgba(234, 179, 8, 0.9); }
}

/* === 플로팅 텍스트 (점수) === */
.floating-text {
    position: absolute; 
    font-size: 32px; font-weight: 900; 
    color: #fbbf24;
    -webkit-text-stroke: 1.5px #fff; 
    text-shadow: 0 0 15px rgba(251, 191, 36, 0.8);
    pointer-events: none; z-index: 9999;
    animation: scorePop 1.2s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}
@keyframes scorePop {
    0% { opacity: 0; transform: translateY(20px) scale(0.5); }
    20% { opacity: 1; transform: translateY(0) scale(1.5); } 
    100% { opacity: 0; transform: translateY(-80px) scale(1); } 
}

/* === 시트 스타일 === */
.sheet-eng-word { font-size: 18px; color: var(--accent-color); font-weight: 700; margin-bottom: 4px; margin-top: 10px; display: none; }
.sheet-eng-desc { font-size: 14px; color: #94a3b8; margin-bottom: 20px; font-style: italic; line-height: 1.4; display: none; }
.sheet-kor-desc { font-size: 16px; color: #1e293b; margin-bottom: 20px; line-height: 1.6; text-align: left; background: #f1f5f9; padding: 16px; border-radius: 16px; width: 100%; word-break: keep-all; }

/* === 공통 UI === */
.header-area { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; flex-shrink: 0; height: 64px; }
.header-logo { height: 56px; width: auto; display: block; filter: drop-shadow(0 4px 10px rgba(0,0,0,0.3)); }
.btn-new-game {
    background: var(--primary-gradient); color: white; border: none; border-radius: 12px;
    padding: 10px 16px; font-size: 14px; font-weight: 700;
    box-shadow: 0 4px 10px rgba(99, 102, 241, 0.3); cursor: pointer; display: flex; align-items: center; gap: 6px; transition: transform 0.1s;
}
.btn-new-game:active { transform: scale(0.95); }

.control-bar {
    display: flex;
    align-items: center;
    justify-content: flex-start; /* 왼쪽 정렬 명시 */
    
    width: 98%; /* 화면 너비 꽉 채우기 (여백 살짝 둠) */
    max-width: 500px; /* 너무 넓어지지 않게 제한 */
    margin: 0 auto 10px auto; /* 중앙 정렬 */
    
    gap: 6px; /* 왼쪽 버튼들 사이 간격 */
    box-sizing: border-box;
}
/* [수정] 배경 투명하게, 테두리는 유지 */
.setting-btn {
    background: transparent; /* 배경 제거 */
    border: 1px solid rgba(255, 255, 255, 0.3); /* 얇은 테두리 */
    color: #e2e8f0;
    
    /* 아까 Challenge 때문에 줄였던 패딩 유지 */
    padding: 6px 8px; 
    border-radius: 12px;
    font-size: 12px;
    cursor: pointer;
    display: flex; align-items: center; gap: 3px;
    white-space: nowrap; flex-shrink: 0;
}
.setting-btn:active { background-color: rgba(255,255,255,0.1); }
.setting-icon { width: 18px; height: 18px; stroke: #94a3b8; }
.setting-btn span { color: white; }

.mode-switch {
    background: rgba(0,0,0,0.3);
    border-radius: 14px;
    padding: 2px; /* 컨테이너 패딩 축소 */
    display: flex;
    flex-shrink: 0; /* 줄어들지 않도록 고정 */
    margin-left: auto;
}
.mode-btn {
    background: transparent;
    border: none;
    color: #94a3b8;
    
    /* 버튼 내부 여백을 줄임 */
    padding: 6px 10px; 
    
    border-radius: 12px;
    font-size: 11px; /* 영문 길이를 고려해 폰트 축소 */
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
    
    /* 영문일 때 너무 길어지면 대문자 변환 제거 고려 (선택사항) */
    /* text-transform: uppercase; */ 
}
.mode-btn.active {
    background: #475569;
    color: white;
    font-weight: bold;
}
.stats-bar { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 12px; padding: 0 4px; flex-shrink: 0; }
.stat-group { display: flex; flex-direction: column; }
.stat-label { font-size: 11px; color: #64748b; font-weight: 700; margin-bottom: 2px; }
.score-val { font-size: 28px; font-weight: 800; color: var(--highlight-color); line-height: 1; display: inline-block;}
.score-val.bump { animation: scoreBump 0.2s cubic-bezier(0.18, 0.89, 0.32, 1.28); }
@keyframes scoreBump { 0% { transform: scale(1); } 50% { transform: scale(1.4); color: #fff; } 100% { transform: scale(1); } }
.score-target { font-size: 14px; color: #64748b; margin-left: 2px; }
.timer-val { font-size: 28px; font-weight: 800; color: white; font-variant-numeric: tabular-nums; line-height: 1; }

.found-area { flex-grow: 1; background: var(--glass-bg); border-radius: 16px; padding: 12px; margin-bottom: 12px; display: flex; flex-direction: column; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
.word-list { flex-grow: 1; overflow-y: auto; display: flex; flex-wrap: wrap; align-content: flex-start; gap: 6px; scrollbar-width: none; }
.found-tag { background: rgba(255,255,255,0.1); color: white; padding: 6px 10px; border-radius: 8px; font-size: 13px; font-weight: 600; border: 1px solid rgba(255,255,255,0.1); animation: popIn 0.3s; cursor: pointer; }
.one-letter { opacity: 0.5; font-size: 11px; }
.found-tag.special { background: linear-gradient(135deg, #f59e0b, #d97706); border: 1px solid #fbbf24; box-shadow: 0 0 12px rgba(245, 158, 11, 0.4); font-weight: 700; padding-right: 8px; }
.found-tag.special::after { content: '★'; margin-left: 4px; color: #fff; font-size: 10px; }

.bottom-container { flex-shrink: 0; width: 100%; max-width: 480px; margin: 0 auto; position: relative; }
.mission-container { width: 100%; display: flex; justify-content: center; position: relative; height: 32px; margin-bottom: 4px; z-index: 20; gap: 12px; }

.mission-bar { 
    /* 기본 모양 */
    background: rgba(255, 255, 255, 0.1); 
    border: 1px solid rgba(255, 255, 255, 0.2); 
    border-radius: 20px; 
    box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
    color: #e2e8f0; 
    
    /* 배치 및 크기 */
    display: flex; 
    align-items: center; 
    justify-content: center; /* 중앙 정렬 추가 */
    gap: 6px; 
    padding: 0 14px; /* 좌우 여백만 줌 */
    height: 36px;    /* 높이 고정 */
    
    /* 텍스트 설정 */
    font-size: 14px; 
    font-weight: 600; 
    
    /* ▼▼▼ [핵심] 줄바꿈 절대 금지 ▼▼▼ */
    white-space: nowrap; 
    
    /* 애니메이션 & 커서 */
    transition: all 0.5s; 
    opacity: 1; 
    transform: translateY(0); 
    cursor: pointer; 
}
.mission-bar:active { transform: scale(0.95); }
.mission-bar.hidden { opacity: 0; pointer-events: none; }
.mission-bar.success { background: linear-gradient(135deg, #f59e0b, #b45309); border: 1px solid #fbbf24; color: white; box-shadow: 0 0 15px rgba(245, 158, 11, 0.6); transform: scale(1.05); }
.mission-bar.success .mission-icon { animation: bounce 0.6s infinite alternate; }
@keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-3px); } }
.mission-icon { font-size: 16px; filter: drop-shadow(0 0 5px rgba(255,215,0,0.6)); }
.mission-score { background: var(--highlight-color); color: #1e293b; padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: 800; margin-left: 4px; }

.current-word { 
    height: 40px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 28px; 
    font-weight: 700; 
    color: white; 
    text-shadow: 0 2px 12px rgba(0,0,0,0.5); 
    margin-top: 15px; 
    margin-bottom: 15px; 
    letter-spacing: 2px; 
    transition: transform 0.1s; 
    min-height: 40px;
    /* 줄바꿈 방지 */
    white-space: nowrap;
}
.shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; color: var(--danger-color) !important; }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

.grid { display: grid; grid-template-columns: repeat(var(--col-count), 1fr); gap: 8px; padding: 12px; background: var(--card-bg); border-radius: 24px; width: 100%; aspect-ratio: 1/1; box-shadow: 0 20px 50px -10px rgba(0,0,0,0.5); position: relative;}
.tile { 
    background-color: var(--tile-bg); color: var(--tile-text); font-size: 22px; font-weight: 700; 
    display: flex; justify-content: center; align-items: center; 
    border-radius: 12px; box-shadow: 0 4px 0 #cbd5e1; 
    transition: transform 0.1s, background-color 0.1s; 
    position: relative; border: 2px solid transparent; cursor: pointer; 
}
.tile.selected { background-color: var(--accent-color); color: white; box-shadow: none; transform: translateY(4px); }
.tile.last-selected { background-color: var(--highlight-color) !important; border: 2px solid #fff !important; transform: translateY(4px) scale(1.05); z-index: 10; }
.tile.pop { animation: popTile 0.2s; }
@keyframes popTile { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

/* === 팝업 & 모달 === */
.overlay, .sheet-wrapper { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 3000; pointer-events: none; }
.overlay { background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); display: flex; justify-content: center; align-items: center; opacity: 0; transition: opacity 0.3s; }
.overlay.active { opacity: 1; pointer-events: auto; }
.modal { background: var(--card-bg); width: 85%; max-width: 320px; padding: 32px 24px; border-radius: 28px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.6); transform: scale(0.9); transition: transform 0.3s; border: 1px solid rgba(255,255,255,0.1); color: white; }
.overlay.active .modal { transform: scale(1); }

.modal-icon { font-size: 72px; margin-bottom: 16px; display: block; }
.modal-title { font-size: 24px; font-weight: 800; color: white; margin-bottom: 16px; }
.modal-desc { font-size: 16px; color: #cbd5e1; margin-bottom: 24px; line-height: 1.5; }

.btn-full { width: 100%; padding: 16px; border: none; border-radius: 16px; font-size: 17px; font-weight: 700; color: white; cursor: pointer; }
.bg-green { background: var(--success-color); }
.bg-red { background: var(--danger-color); }

/* 옵션 리스트 스타일 */
.option-list { width: 100%; margin-bottom: 20px; }
.option-btn {
    background: rgba(255, 255, 255, 0.08); border: 2px solid rgba(255, 255, 255, 0.1); 
    border-radius: 16px; font-size: 1.1rem; font-weight: 700; color: #cbd5e1;
    cursor: pointer; transition: all 0.2s; display: flex; justify-content: center; align-items: center;
}
.option-btn:active { transform: scale(0.97); }
.option-btn.selected { background: var(--primary-gradient); color: white; border-color: transparent; box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4); }
.option-list.grid-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
.option-list.grid-options .option-btn { aspect-ratio: 1/1; flex-direction: column; gap: 4px; }
.option-list.level-options { display: flex; flex-direction: column; gap: 12px; }
.option-list.level-options .option-btn { padding: 18px; width: 100%; }

.sheet-wrapper { display: flex; flex-direction: column; justify-content: flex-end; }
.sheet-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); opacity: 0; transition: opacity 0.3s; }
.sheet-wrapper.active { pointer-events: auto; }
.sheet-wrapper.active .sheet-bg { opacity: 1; }
.sheet { background: white; width: 100%; max-width: 600px; margin: 0 auto; border-radius: 24px 24px 0 0; padding: 24px; transform: translateY(100%); transition: transform 0.3s; text-align: center; position: relative; z-index: 2; display: flex; flex-direction: column; align-items: center; }
.sheet-wrapper.active .sheet { transform: translateY(0); }
.sheet h2 { color: #1e293b; margin: 0 0 10px 0; font-size: 28px; font-weight: 800;}
.btn-gray { background: #cbd5e1; color: #475569; margin-top: 10px; }

.anim-fail { animation: shake 0.3s; color: var(--danger-color); }
.anim-success { color: var(--success-color); transform: scale(1.1); transition: 0.2s; }
/* [기존 스타일 원복 끝] */

/* 2. .hint-highlight 수정 (보드 흔들림 방지 + 스타일 통일) */
.tile.hint-highlight {
    background-color: #fef08a !important; 
    color: #854d0e !important;
    
    /* [핵심] border 대신 box-shadow 사용 (보드 흔들림 방지) */
    border: 2px solid transparent !important; 
    box-shadow: inset 0 0 0 3px #eab308, 0 0 15px rgba(234, 179, 8, 0.6) !important;
    
    transform: scale(1.05); 
    z-index: 5;
    animation: pulseHint 1s infinite alternate;
}

/* pulseHint 애니메이션은 기존 유지 */
@keyframes pulseHint {
    from { transform: scale(1.05); box-shadow: inset 0 0 0 3px #eab308, 0 0 15px rgba(234, 179, 8, 0.6); }
    to { transform: scale(1.1); box-shadow: inset 0 0 0 3px #eab308, 0 0 25px rgba(234, 179, 8, 0.9); }
}

/* [신규] 수동 힌트 버튼 스타일 */
.hint-btn {
    background: rgba(255, 255, 255, 0.1); 
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #fbbf24; /* 노란색 텍스트 */
    font-size: 14px; 
    font-weight: 700;
    padding: 6px 16px;
    border-radius: 20px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 36px;  /* 미션바와 높이 통일 */
    padding: 0 16px;
    font-size: 14px;
    font-weight: 600;
    
    /* ▼▼▼ [핵심] 줄바꿈 절대 금지 ▼▼▼ */
    white-space: nowrap;
}

.hint-btn:active {
    transform: scale(0.95);
    background: rgba(255, 255, 255, 0.2);
}

.hint-btn.hidden {
    display: none;
}

/* 통계 라벨 너비 확보 */
.stat-label {
    white-space: nowrap;
}

/* 상단 헤더 버튼 정렬 */
.header-controls {
    display: flex;
    gap: 10px;
    align-items: center;
}

/* [수정] 배경 투명하게 변경 */
.btn-icon-setting {
    background: transparent; /* 배경 제거 */
    border: none;
    color: #fff;
    width: 40px; height: 40px;
    border-radius: 50%; /* 동그라미 */
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.2s;
}

/* 마우스 올렸을 때만 살짝 표시 */
.btn-icon-setting:hover {
    background: rgba(255, 255, 255, 0.1);
}
.btn-icon-setting:active {
    transform: scale(0.95);
}

/* 모달 오버레이 */
.modal-overlay {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.hidden {
    display: none !important;
}

/* 모달 콘텐츠 박스 */
.modal-content {
    background: #2c2f38; /* 게임 배경보다 약간 밝게 */
    padding: 24px;
    border-radius: 16px;
    width: 90%;
    max-width: 320px;
    color: white;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}

.modal-header h2 { margin: 0; font-size: 1.2rem; }
.close-btn { font-size: 24px; background: none; border: none; color: #888; cursor: pointer; }

/* 설정 항목 리스트 */
.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    font-size: 1rem;
}

/* 토글 스위치 CSS (iOS 스타일) */
.switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
}
.switch input { opacity: 0; width: 0; height: 0; }
.slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background-color: #555;
    transition: .4s;
    border-radius: 24px;
}
.slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}
input:checked + .slider { background-color: #7b61ff; /* 테마 포인트 컬러 */ }
input:checked + .slider:before { transform: translateX(20px); }
/* 비활성화된 토글 스타일 */
input:disabled + .slider { background-color: #333; cursor: not-allowed; opacity: 0.5; }

/* 광고 제거 버튼 스타일 */
.divider { border: 0; border-top: 1px solid #444; margin: 20px 0; }

.btn-premium {
    width: 100%;
    padding: 12px;
    background: linear-gradient(90deg, #ff9a9e 0%, #fecfef 99%, #fecfef 100%); /* 혹은 골드 컬러 */
    background: #ffcc00; /* 골드 단색 예시 */
    color: #000;
    border: none;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.1s;
}
.btn-premium:active { transform: scale(0.98); }

/* 콘텐츠(로고, 버튼)를 배경보다 위에 배치 */
.intro-content {
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    transform: translateY(-60px);
}

/* --------------------------------------
   3D 배경 효과 구현
   -------------------------------------- */
.intro-bg-container {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100dvh;
    perspective: 800px; /* 3D 원근감 부여 */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1;
}

.board-3d {
    position: relative;
    width: 300px; height: 300px;
    /* 3D 기울기 효과 (X축 회전, Z축 회전) */
    transform: rotateX(60deg) rotateZ(-30deg) scale(1.7);
    transform-style: preserve-3d;
}

.board-img {
    width: 100%;
    height: 100%;
    border-radius: 16px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.5); /* 그림자로 입체감 */
    opacity: 0.6; /* 약간 투명하게 */
}

/* 어두운 막 (로고를 돋보이게 함) */
.bg-overlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100dvh;
    background: radial-gradient(circle, rgba(30,41,59,0.4) 0%, rgba(30,41,59,0.95) 80%);
    z-index: 2;
    backdrop-filter: blur(2px); /* 살짝 흐리게 */
}

/* 1. 선 스타일 및 애니메이션 명령 */
.drag-trail path {
    /* 선 색상 (파란색 계열) */
    stroke: rgba(37, 86, 159, 0.9); 
    
    /* 빛나는 효과 */
    filter: drop-shadow(0 0 8px rgba(255, 200, 0, 0.8));
    
    /* 선 굵기와 끝 모양 */
    stroke-width: 14px;
    stroke-linecap: round;

    /* [중요] 선 그리기 준비 (처음엔 숨김) */
    /* 선의 길이에 맞춰 대략 230~300 사이로 잡으면 됩니다 */
    stroke-dasharray: 300; 
    stroke-dashoffset: 300;

    /* [애니메이션 설정]
       - drawSimple: 아래 정의된 움직임 이름
       - 1.5s: 그리는 데 걸리는 시간 (조절 가능)
       - 3: 3번 반복
       - forwards: 애니메이션이 끝나면 마지막 상태(선이 그려진 상태) 유지
       - ease-in-out: 시작과 끝을 부드럽게
    */
    animation: drawSimple 1.5s 3 ease-in-out;
}

/* 2. 위치 잡기 (기존 유지) */
.drag-trail {
    position: absolute;
    top: 0; left: 0;
    z-index: 15;
    pointer-events: none;
}

/* 3. 애니메이션 정의서 (새로 추가) */
/* 선을 쓱~ 그리는 동작 정의 */
@keyframes drawSimple {
    to { 
        stroke-dashoffset: 0; 
    }
}

/* SVG Path 좌표 맞추기 (보드판 위에서 움직이도록) */
/* HTML의 svg path d값과 매칭되어야 함 */

/* --- [UI/UX Polish] 영문 가독성 향상 --- */

/* 버튼과 라벨을 대문자로 통일하여 가독성 확보 */
.btn-new-game, .mode-btn, .stat-label, .btn-premium {
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* 스탯 라벨은 영문일 때 조금 더 작고 굵게 */
.stat-label {
    font-size: 11px; 
    font-weight: 800;
    opacity: 0.7;
}

/* 힌트 툴팁도 강조 */
.hint-tooltip {
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.5px;
}

/* [추가] 설정 화면 내 자료 출처 스타일 */
.source-info-area {
    margin-top: 25px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    text-align: center;
}

.source-title {
    font-size: 12px;
    font-weight: bold;
    color: #94a3b8;
    margin-bottom: 5px;
}

.source-desc {
    font-size: 11px;
    color: #64748b;
    line-height: 1.4;
    margin: 0 0 10px 0;
    word-break: keep-all; /* 한글 단어 끊김 방지 */
}

.source-links {
    font-size: 11px;
    display: flex;
    justify-content: center;
    gap: 10px;
    align-items: center;
}

.source-links a {
    color: #818cf8; /* 링크색 (연한 보라/파랑) */
    text-decoration: none;
    transition: color 0.2s;
}
.source-links a:hover {
    color: #a5b4fc;
    text-decoration: underline;
}

.divider-vertical {
    color: #475569;
    font-size: 10px;
}

/* [수정] 캔버스 배경을 강제로 투명하게 만듭니다 */
canvas {
    background-color: transparent !important;
    pointer-events: none;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 9999;
}

/* 4. 하단 컨테이너 (게임판) 위치 잡기 */
.bottom-container {
    /* 화면 아래쪽에 붙되, 광고가 밀어올리면 같이 올라감 */
    margin-top: auto;
    width: 100%;
    padding-bottom: 10px;
}

#confetti-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* 클릭 통과 */
    z-index: 1500;
    background-color: transparent !important; /* 투명 배경 */
}